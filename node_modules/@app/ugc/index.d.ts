import {
  UgcUgcFileFull,
  UgcUgcFileListItem,
  UgcUgcFilePermission,
  UgcUgcFilePermissionSubjectType,
} from 'services/ugc-runner/runtime/runtimeTypes'
import { JSONInputObject } from 'utils/types'

declare type UgcFileStorage = 'cgs' | 'db'
declare type EntityPermissionSubjectType = 'user'
export declare function findUgcFile(ctx: RichUgcCtx, path: string): Promise<UgcUgcFileFull | null>
export declare function findUgcFile(
  ctx: RichUgcCtx,
  loadFrom: UgcFileStorage,
  path: string,
): Promise<UgcUgcFileFull | null>
export declare function updateUgcFileSource(ctx: RichUgcCtx, path: string, source: string): Promise<UgcUgcFileFull>
export declare function listUgcFiles(
  ctx: RichUgcCtx,
  loadFrom: UgcFileStorage,
  pathRegexps?: string | string[],
): Promise<{
  files: Array<UgcUgcFileListItem>
}>
export declare function listUgcFilesByIds(
  ctx: RichUgcCtx,
  ids: string[],
): Promise<{
  files: Record<string, UgcUgcFileListItem>
}>
export declare function ensureUgcDirectory(ctx: RichUgcCtx, path: string): Promise<void>
export declare function updateUgcFile(
  ctx: RichUgcCtx,
  path: string,
  update: {
    code?: string
    params?: JSONInputObject
  },
): Promise<UgcUgcFileFull>
export declare function deleteUgcFile(ctx: RichUgcCtx, path: string): Promise<void>
export declare function deleteUgcDirectoryRecursive(ctx: RichUgcCtx, path: string): Promise<void>
export declare function listUgcFilePermissions(
  ctx: RichUgcCtx,
  loadFrom: UgcFileStorage,
  path: string,
): Promise<UgcUgcFilePermission[]>
export declare function hasUgcFilePermission(
  ctx: RichUgcCtx,
  loadFrom: UgcFileStorage,
  path: string,
  userId: string,
): Promise<boolean>
export declare function createOrUpdateUgcFilePermission(
  ctx: RichUgcCtx,
  path: string,
  subjectType: UgcUgcFilePermissionSubjectType,
  subjectId: string | null,
  canRead: boolean,
): Promise<UgcUgcFilePermission>
export declare function deleteUgcFilePermission(
  ctx: RichUgcCtx,
  path: string,
  subjectType: UgcUgcFilePermissionSubjectType,
  subjectId: string | null,
): Promise<void>
export declare type UgcFilePermission = UgcUgcFilePermission
export declare type UgcFile = UgcUgcFileFull
export declare type UgcFileListItem = UgcUgcFileListItem

export {}
